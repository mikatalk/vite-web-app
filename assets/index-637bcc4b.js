var A=Object.defineProperty;var L=(o,e,t)=>e in o?A(o,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):o[e]=t;var h=(o,e,t)=>(L(o,typeof e!="symbol"?e+"":e,t),t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const n of s)if(n.type==="childList")for(const r of n.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&i(r)}).observe(document,{childList:!0,subtree:!0});function t(s){const n={};return s.integrity&&(n.integrity=s.integrity),s.referrerPolicy&&(n.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?n.credentials="include":s.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function i(s){if(s.ep)return;s.ep=!0;const n=t(s);fetch(s.href,n)}})();const T="modulepreload",x=function(o){return"/"+o},E={},I=function(e,t,i){if(!t||t.length===0)return e();const s=document.getElementsByTagName("link");return Promise.all(t.map(n=>{if(n=x(n),n in E)return;E[n]=!0;const r=n.endsWith(".css"),f=r?'[rel="stylesheet"]':"";if(!!i)for(let d=s.length-1;d>=0;d--){const u=s[d];if(u.href===n&&(!r||u.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${n}"]${f}`))return;const l=document.createElement("link");if(l.rel=r?"stylesheet":T,r||(l.as="script",l.crossOrigin=""),l.href=n,document.head.appendChild(l),r)return new Promise((d,u)=>{l.addEventListener("load",d),l.addEventListener("error",()=>u(new Error(`Unable to preload CSS for ${n}`)))})})).then(()=>e())};function b(o={}){const{immediate:e=!1,onNeedRefresh:t,onOfflineReady:i,onRegistered:s,onRegisteredSW:n,onRegisterError:r}=o;let f,v;const l=async(u=!0)=>{await v};async function d(){if("serviceWorker"in navigator){const{Workbox:u}=await I(()=>import("./workbox-window.prod.es5-a7b12eab.js"),[]);f=new u("/sw.js",{scope:"/",type:"classic"}),f.addEventListener("activated",a=>{(a.isUpdate||a.isExternal)&&window.location.reload()}),f.addEventListener("installed",a=>{a.isUpdate||i==null||i()}),f.register({immediate:e}).then(a=>{n?n("/sw.js",a):s==null||s(a)}).catch(a=>{r==null||r(a)})}}return v=d(),l}console.log("Initializing PWA...");"serviceWorker"in navigator&&!/localhost/.test(window.location)&&b();let p;const m=document.querySelector("#main-install-app-button");window.addEventListener("beforeinstallprompt",o=>{o.preventDefault(),p=o,m.style.display="block",m.addEventListener("click",()=>{m.style.display="none",p.prompt(),p.userChoice.then(e=>{e.outcome==="accepted"?console.log("User accepted the A2HS prompt"):console.log("User dismissed the A2HS prompt"),p=null})})});(window.matchMedia("(display-mode: standalone)").matches||window.navigator.standalone===!0)&&(m.style.display="none");const C=()=>{var o;return!!((o=window.matchMedia)!=null&&o.call(window,"(display-mode: standalone)").matches||window.navigator.standalone)};C()&&(m.style.display="none");window.addEventListener("appinstalled",o=>{console.log("success app install!")});const w=class{constructor(e,t,i=w.UNSET){this.x=e,this.y=t,this.value=i}};let c=w;h(c,"UNSET","unset"),h(c,"SET","set");class M{constructor(){h(this,"cells",Array.from({length:100}).map((e,t)=>new c(t%10,Math.floor(t/10))))}getCellValueAtIndex(e){return this.cells[e].value}setCellValueAtIndex(e,t){this.cells[e].value=t}getCellValueAtPoint(e,t){return this.getCellValueAtIndex(this.pointToIndex(e,t))}setCellValueAtPoint(e,t,i){this.setCellValueAtIndex(this.pointToIndex(e,t),i)}pointToIndex(e,t){return e+10*t}}const g={nextPieces:[],grid:new M},y={state:g,doSomething(){g.grid.setCellValueAtIndex(0,c.SET),g.grid.setCellValueAtPoint(9,3,c.SET),g.grid.setCellValueAtPoint(Math.floor(Math.random()*10),Math.floor(Math.random()*10),c[Math.random()>.5?"SET":"UNSET"])}};console.log("store:",y);console.log("cells:",y.state.grid.cells);const S=document.querySelector("#app .grid");P();function P(){y.doSomething(),R(),window.requestAnimationFrame(P)}function R(){S.innerHTML='<div class="grid-bg"></div>',y.state.grid.cells.forEach(({value:o})=>{console.log(" -"),S.innerHTML+=`<div class="box ${o==="set"?"active":""}"></div>`})}
