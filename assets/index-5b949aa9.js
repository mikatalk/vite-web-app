var I=Object.defineProperty;var x=(n,e,t)=>e in n?I(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var p=(n,e,t)=>(x(n,typeof e!="symbol"?e+"":e,t),t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const r of s.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&i(r)}).observe(document,{childList:!0,subtree:!0});function t(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerPolicy&&(s.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?s.credentials="include":o.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(o){if(o.ep)return;o.ep=!0;const s=t(o);fetch(o.href,s)}})();const C="modulepreload",R=function(n){return"/"+n},E={},T=function(e,t,i){if(!t||t.length===0)return e();const o=document.getElementsByTagName("link");return Promise.all(t.map(s=>{if(s=R(s),s in E)return;E[s]=!0;const r=s.endsWith(".css"),u=r?'[rel="stylesheet"]':"";if(!!i)for(let c=o.length-1;c>=0;c--){const d=o[c];if(d.href===s&&(!r||d.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${s}"]${u}`))return;const l=document.createElement("link");if(l.rel=r?"stylesheet":C,r||(l.as="script",l.crossOrigin=""),l.href=s,document.head.appendChild(l),r)return new Promise((c,d)=>{l.addEventListener("load",c),l.addEventListener("error",()=>d(new Error(`Unable to preload CSS for ${s}`)))})})).then(()=>e())};function b(n={}){const{immediate:e=!1,onNeedRefresh:t,onOfflineReady:i,onRegistered:o,onRegisteredSW:s,onRegisterError:r}=n;let u,v;const l=async(d=!0)=>{await v};async function c(){if("serviceWorker"in navigator){const{Workbox:d}=await T(()=>import("./workbox-window.prod.es5-a7b12eab.js"),[]);u=new d("/sw.js",{scope:"/",type:"classic"}),u.addEventListener("activated",a=>{(a.isUpdate||a.isExternal)&&window.location.reload()}),u.addEventListener("installed",a=>{a.isUpdate||i==null||i()}),u.register({immediate:e}).then(a=>{s?s("/sw.js",a):o==null||o(a)}).catch(a=>{r==null||r(a)})}}return v=c(),l}console.log("Initializing PWA...");"serviceWorker"in navigator&&!/localhost/.test(window.location)&&b();let g;const h=document.querySelector("#main-install-app-button");window.addEventListener("beforeinstallprompt",n=>{n.preventDefault(),g=n,h.style.display="block",h.addEventListener("click",()=>{h.style.display="none",g.prompt(),g.userChoice.then(e=>{e.outcome==="accepted"?console.log("User accepted the A2HS prompt"):console.log("User dismissed the A2HS prompt"),g=null})})});(window.matchMedia("(display-mode: standalone)").matches||window.navigator.standalone===!0)&&(h.style.display="none");const O=()=>{var n;return!!((n=window.matchMedia)!=null&&n.call(window,"(display-mode: standalone)").matches||window.navigator.standalone)};O()&&(h.style.display="none");window.addEventListener("appinstalled",n=>{console.log("success app install!")});const w=class{constructor(e,t,i=w.UNSET){this.x=e,this.y=t,this.value=i}};let f=w;p(f,"UNSET","unset"),p(f,"SET","set");class U{constructor(){p(this,"cells",Array.from({length:100}).map((e,t)=>new f(t%10,Math.floor(t/10))))}getCellValueAtIndex(e){return this.cells[e].value}setCellValueAtIndex(e,t){this.cells[e].value=t}getCellValueAtPoint(e,t){return this.getCellValueAtIndex(this.pointToIndex(e,t))}setCellValueAtPoint(e,t,i){this.setCellValueAtIndex(this.pointToIndex(e,t),i)}pointToIndex(e,t){return e+10*t}}const S={nextPieces:[],grid:new U},m={state:S,doSomething(){S.grid.setCellValueAtPoint(Math.floor(Math.random()*10),Math.floor(Math.random()*10),f[Math.random()>.5?"SET":"UNSET"])}};console.log("store:",m);console.log("cells:",m.state.grid.cells);const W=document.querySelector("#app .grid"),P=[];m.state.grid.cells.forEach(({value:n})=>{const e=document.createElement("div");e.classList.add("box"),n==="set"&&e.classList.add("active"),P.push(e),W.appendChild(e)});let L=0,y=1;A();m.doSomething();y+=1;function A(){window.requestAnimationFrame(A),m.doSomething(),y+=1,L!==y&&(L=y,M())}function M(){m.state.grid.cells.forEach(({value:n},e)=>{const t=P[e];n==="set"?t.classList.add("active"):t.classList.remove("active")})}
